generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Customer {
  id          Int      @id @default(autoincrement())
  name        String
  phoneNumber String
  orders      Order[]

  @@map("customers")
}

model Restaurant {
  id          Int      @id @default(autoincrement())
  name        String
  description String
  isOpen      Boolean  @default(true) // Handles "opened/closed" status
  orders      Order[]

  @@map("restaurantsyb")
}

// This is the pivot table linking Customer and Restaurant
model Order {
  id           Int      @id @default(autoincrement())
  orderTime    DateTime @default(now())
  itemCount    Int      // "Items only need to be amount of item"
  eta          Int      // Estimated Time of Arrival in minutes
  
  // Foreign Keys
  customerId   Int
  restaurantId Int
  
  customer     Customer   @relation(fields: [customerId], references: [id], onDelete: Cascade)
  restaurant   Restaurant @relation(fields: [restaurantId], references: [id], onDelete: Cascade)

  @@map("orders")
}